{{define "task_item.html"}}
<div class="task-item {{if .Completed}}completed{{end}} priority-{{.Priority}}" id="task-{{.ID}}" data-id="{{.ID}}">
    <div class="drag-handle">&#8942;&#8942;</div>
    <div class="task-checkbox">
        <input type="checkbox"
               id="checkbox-{{.ID}}"
               {{if .Completed}}checked{{end}}
               hx-post="/api/tasks/{{.ID}}/toggle"
               hx-target="#task-{{.ID}}"
               hx-swap="outerHTML">
        <label for="checkbox-{{.ID}}"></label>
    </div>
    <div class="task-content">
        <span class="task-description editable" onclick="toggleInlineTaskEdit({{.ID}})" title="Edit task">{{.Description}}</span>
        <div class="task-meta">
            <span class="priority-badge priority-{{.Priority}}">{{.Priority}}</span>
            {{if .DueDate}}
            <span class="due-date {{if .IsOverdue}}overdue{{end}}">
                Due: {{.DueDate.Format "Jan 2, 2006"}}
            </span>
            {{end}}
        </div>
        {{if .Notes}}
        <div class="task-notes">{{.Notes}}</div>
        {{end}}
    </div>
    <div class="task-actions">
        <button class="btn btn-icon btn-danger"
                hx-delete="/api/tasks/{{.ID}}"
                hx-target="#task-{{.ID}}"
                hx-swap="delete"
                hx-confirm="Delete this task?"
                title="Delete">
            &#10005;
        </button>
    </div>

    <div class="form-container hidden inline-edit-form" id="inline-task-edit-{{.ID}}">
        {{template "task_form.html" .}}
    </div>
</div>
{{end}}
